{"ast":null,"code":"var _jsxFileName = \"/Users/anupjaiswal/Desktop/FregranceFusion/src/pages/Checkout/OrderDetails.jsx\",\n    _s = $RefreshSig$();\n\nimport toast from \"react-hot-toast\";\nimport { v4 as uuid } from \"uuid\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../../contexts/cartContext\";\nimport { useAddress } from \"../../contexts/addressContext\";\nimport { getTotalPrice } from \"../../utils/cartPrice\";\nimport { useAuth } from \"../../contexts/authContext\";\nimport { useOrder } from \"../../contexts/orderContext\";\nimport { addOrderService } from \"../../services/orderServices/addOrderService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const OrderDetails = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    token\n  } = useAuth();\n  const {\n    cartState,\n    setSelectedCoupon,\n    selectedCoupon,\n    cartPrice\n  } = useCart();\n  const {\n    addressState: {\n      addresses,\n      selectedAddrId\n    }\n  } = useAddress();\n  const {\n    dispatchOrder\n  } = useOrder();\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n  const totalPrice = getTotalPrice(cartState, cartPrice.price, cartPrice.discountInPrice, cartPrice.deliveryCharges);\n  const discountedCouponPrice = totalPrice * selectedCoupon.discount / 100;\n  const currentAddress = addresses === null || addresses === void 0 ? void 0 : addresses.find(address => address._id === selectedAddrId);\n\n  const loadScript = async url => {\n    return new Promise(resolve => {\n      const script = document.createElement(\"script\");\n      script.src = url;\n\n      script.onload = () => {\n        resolve(true);\n      };\n\n      script.onerror = () => {\n        resolve(false);\n      };\n\n      document.body.appendChild(script);\n    });\n  };\n\n  const displayRazorpay = async () => {\n    const res = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n\n    if (!res) {\n      toast.error(\"Razorpay SDK failed to load, check your connection\");\n      return;\n    }\n\n    const options = {\n      key: \"rzp_test_SP206ka3zuV4SX\",\n      amount: (discountedCouponPrice ? totalPrice - discountedCouponPrice : totalPrice) * 100,\n      currency: \"INR\",\n      name: \"Essence\",\n      description: \"Thank you for shopping with us\",\n      handler: async function (response) {\n        const orderId = uuid().toString().split(\"-\")[0];\n        const orderData = {\n          products: [...cartState],\n          amount: totalPrice,\n          paymentId: response.razorpay_payment_id,\n          orderId,\n          delivery: currentAddress\n        };\n        const {\n          data,\n          status\n        } = await addOrderService(orderData, token);\n\n        if (status === 201) {\n          setSelectedCoupon({});\n          dispatchOrder({\n            type: \"GET_ORDERS\",\n            payload: data.order\n          });\n          navigate(`/order/${orderId}`);\n        }\n      },\n      prefill: {\n        name: `${user.firstName} ${user.lastName}`,\n        email: user.email,\n        contact: \"93225088143\"\n      }\n    };\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-details\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      children: \"Order Summary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-items-wrapper order-items\",\n      children: cartState.map(cartItem => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [cartItem.title, \" (\\u20B9\", cartItem.price, \" x \", cartItem.qty, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u20B9\", cartItem.price * cartItem.qty]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, cartItem.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      children: \"Price Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-items-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Total Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u20B9\", cartPrice.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Total Discount\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u20B9\", cartPrice.discountInPrice + (JSON.stringify(selectedCoupon) !== \"{}\" ? discountedCouponPrice : 0)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Delivery Charges\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u20B949\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"Grand Total\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"\\u20B9\", totalPrice - (JSON.stringify(selectedCoupon) !== \"{}\" ? discountedCouponPrice : 0)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"title\",\n      children: \"Deliver To\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"order-items-wrapper addr-item\",\n      children: currentAddress ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"address-name\",\n          children: currentAddress.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [currentAddress.street, \", \", currentAddress.city, \" -\", \" \", currentAddress.zipcode]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [currentAddress.state, \", \", currentAddress.country]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: currentAddress.mobile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add an address to proceed.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-primary place-order\",\n      disabled: !selectedAddrId,\n      onClick: displayRazorpay,\n      children: \"Place Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n\n_s(OrderDetails, \"wsZvmqV5bx69xyUniVrFksJtOMQ=\", false, function () {\n  return [useNavigate, useAuth, useCart, useAddress, useOrder];\n});\n\n_c = OrderDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderDetails\");","map":{"version":3,"sources":["/Users/anupjaiswal/Desktop/FregranceFusion/src/pages/Checkout/OrderDetails.jsx"],"names":["toast","v4","uuid","useNavigate","useCart","useAddress","getTotalPrice","useAuth","useOrder","addOrderService","OrderDetails","navigate","token","cartState","setSelectedCoupon","selectedCoupon","cartPrice","addressState","addresses","selectedAddrId","dispatchOrder","user","JSON","parse","localStorage","getItem","totalPrice","price","discountInPrice","deliveryCharges","discountedCouponPrice","discount","currentAddress","find","address","_id","loadScript","url","Promise","resolve","script","document","createElement","src","onload","onerror","body","appendChild","displayRazorpay","res","error","options","key","amount","currency","name","description","handler","response","orderId","toString","split","orderData","products","paymentId","razorpay_payment_id","delivery","data","status","type","payload","order","prefill","firstName","lastName","email","contact","paymentObject","window","Razorpay","open","map","cartItem","title","qty","id","stringify","street","city","zipcode","state","country","mobile"],"mappings":"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","sourcesContent":["import toast from \"react-hot-toast\";\nimport { v4 as uuid } from \"uuid\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useCart } from \"../../contexts/cartContext\";\nimport { useAddress } from \"../../contexts/addressContext\";\nimport { getTotalPrice } from \"../../utils/cartPrice\";\nimport { useAuth } from \"../../contexts/authContext\";\nimport { useOrder } from \"../../contexts/orderContext\";\nimport { addOrderService } from \"../../services/orderServices/addOrderService\";\n\nexport const OrderDetails = () => {\n  const navigate = useNavigate();\n  const { token } = useAuth();\n\n  const { cartState, setSelectedCoupon, selectedCoupon, cartPrice } = useCart();\n  const {\n    addressState: { addresses, selectedAddrId },\n  } = useAddress();\n  const { dispatchOrder } = useOrder();\n\n  const user = JSON.parse(localStorage.getItem(\"user\"));\n\n  const totalPrice = getTotalPrice(\n    cartState,\n    cartPrice.price,\n    cartPrice.discountInPrice,\n    cartPrice.deliveryCharges\n  );\n\n  const discountedCouponPrice = (totalPrice * selectedCoupon.discount) / 100;\n\n  const currentAddress = addresses?.find(\n    (address) => address._id === selectedAddrId\n  );\n\n  const loadScript = async (url) => {\n    return new Promise((resolve) => {\n      const script = document.createElement(\"script\");\n      script.src = url;\n\n      script.onload = () => {\n        resolve(true);\n      };\n\n      script.onerror = () => {\n        resolve(false);\n      };\n      document.body.appendChild(script);\n    });\n  };\n\n  const displayRazorpay = async () => {\n    const res = await loadScript(\n      \"https://checkout.razorpay.com/v1/checkout.js\"\n    );\n\n    if (!res) {\n      toast.error(\"Razorpay SDK failed to load, check your connection\");\n      return;\n    }\n\n    const options = {\n      key: \"rzp_test_SP206ka3zuV4SX\",\n      amount:\n        (discountedCouponPrice\n          ? totalPrice - discountedCouponPrice\n          : totalPrice) * 100,\n      currency: \"INR\",\n      name: \"Essence\",\n      description: \"Thank you for shopping with us\",\n      handler: async function (response) {\n        const orderId = uuid().toString().split(\"-\")[0];\n\n        const orderData = {\n          products: [...cartState],\n          amount: totalPrice,\n          paymentId: response.razorpay_payment_id,\n          orderId,\n          delivery: currentAddress,\n        };\n\n        const { data, status } = await addOrderService(orderData, token);\n\n        if (status === 201) {\n          setSelectedCoupon({});\n          dispatchOrder({ type: \"GET_ORDERS\", payload: data.order });\n          navigate(`/order/${orderId}`);\n        }\n      },\n\n      prefill: {\n        name: `${user.firstName} ${user.lastName}`,\n        email: user.email,\n        contact: \"93225088143\",\n      },\n    };\n\n    const paymentObject = new window.Razorpay(options);\n    paymentObject.open();\n  };\n\n  return (\n    <div className=\"order-details\">\n      <div className=\"title\">Order Summary</div>\n\n      <div className=\"order-items-wrapper order-items\">\n        {cartState.map((cartItem) => (\n          <div key={cartItem.id} className=\"item\">\n            <div>\n              {cartItem.title} (&#8377;{cartItem.price} x {cartItem.qty})\n            </div>\n\n            <div>&#8377;{cartItem.price * cartItem.qty}</div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"title\">Price Details</div>\n\n      <div className=\"order-items-wrapper\">\n        <div className=\"item\">\n          <div>Total Price</div>\n          <div>&#8377;{cartPrice.price}</div>\n        </div>\n\n        <div className=\"item\">\n          <div>Total Discount</div>\n          <div>\n            &#8377;\n            {cartPrice.discountInPrice +\n              (JSON.stringify(selectedCoupon) !== \"{}\"\n                ? discountedCouponPrice\n                : 0)}\n          </div>\n        </div>\n\n        <div className=\"item\">\n          <div>Delivery Charges</div>\n          <div>&#8377;49</div>\n        </div>\n\n        <div className=\"item\">\n          <div>Grand Total</div>\n          <div>\n            &#8377;\n            {totalPrice -\n              (JSON.stringify(selectedCoupon) !== \"{}\"\n                ? discountedCouponPrice\n                : 0)}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"title\">Deliver To</div>\n\n      <div className=\"order-items-wrapper addr-item\">\n        {currentAddress ? (\n          <>\n            <div className=\"address-name\">{currentAddress.name}</div>\n            <div>\n              {currentAddress.street}, {currentAddress.city} -{\" \"}\n              {currentAddress.zipcode}\n            </div>\n            <div>\n              {currentAddress.state}, {currentAddress.country}\n            </div>\n            <div>{currentAddress.mobile}</div>\n          </>\n        ) : (\n          <p>Add an address to proceed.</p>\n        )}\n      </div>\n\n      <button\n        className=\"btn btn-primary place-order\"\n        disabled={!selectedAddrId}\n        onClick={displayRazorpay}\n      >\n        Place Order\n      </button>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}