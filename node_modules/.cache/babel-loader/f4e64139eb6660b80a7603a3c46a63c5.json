{"ast":null,"code":"var _jsxFileName = \"/Users/anupjaiswal/Desktop/e_commerce/src/contexts/wishlistContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useState, useReducer, useEffect } from \"react\";\nimport { useAuth } from \"./authContext\";\nimport { getWishlistItems, addToWishlist, removeFromWishlist } from \"../services/wishlistServices\";\nimport { wishlistReducer } from \"../reducers/wishlistReducer\";\nimport { toast } from \"react-hot-toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WishlistContext = /*#__PURE__*/createContext();\n\nconst WishlistProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    token,\n    isAuth,\n    navigate\n  } = useAuth();\n  const [wishlistState, wishlistDispatch] = useReducer(wishlistReducer, []);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    if (isAuth) {\n      try {\n        (async () => {\n          const {\n            data,\n            status\n          } = await getWishlistItems(token);\n\n          if (status === 200) {\n            wishlistDispatch({\n              type: \"SET_WISHLIST_DATA\",\n              payload: data.wishlist\n            });\n          }\n        })();\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }, [isAuth]);\n\n  const toggleWishlist = async product => {\n    if (isAuth) {\n      const itemExists = wishlistState.find(item => item._id === product._id);\n\n      if (itemExists) {\n        setLoading(true);\n        const {\n          data,\n          status\n        } = await removeFromWishlist(product._id, token);\n        setLoading(false);\n\n        if (status === 200) {\n          toast.success(\"Product removed from Wishlist!\");\n          wishlistDispatch({\n            type: \"SET_WISHLIST_DATA\",\n            payload: data.wishlist\n          });\n        }\n      } else {\n        setLoading(true);\n        const {\n          data,\n          status\n        } = await addToWishlist(product, token);\n        setLoading(false);\n\n        if (status === 201) {\n          toast.success(\"Product added to Wishlist!\");\n          wishlistDispatch({\n            type: \"SET_WISHLIST_DATA\",\n            payload: data.wishlist\n          });\n        }\n      }\n    } else {\n      navigate(\"/login\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(WishlistContext.Provider, {\n    value: {\n      wishlistState,\n      wishlistDispatch,\n      toggleWishlist,\n      loading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WishlistProvider, \"dNsJ92TX9efxcgP/Al2h0T1U/Uk=\", false, function () {\n  return [useAuth];\n});\n\n_c = WishlistProvider;\n\nconst useWishlist = () => {\n  _s2();\n\n  return useContext(WishlistContext);\n};\n\n_s2(useWishlist, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport { WishlistProvider, useWishlist };\n\nvar _c;\n\n$RefreshReg$(_c, \"WishlistProvider\");","map":{"version":3,"sources":["/Users/anupjaiswal/Desktop/e_commerce/src/contexts/wishlistContext.js"],"names":["createContext","useContext","useState","useReducer","useEffect","useAuth","getWishlistItems","addToWishlist","removeFromWishlist","wishlistReducer","toast","WishlistContext","WishlistProvider","children","token","isAuth","navigate","wishlistState","wishlistDispatch","loading","setLoading","data","status","type","payload","wishlist","err","console","error","toggleWishlist","product","itemExists","find","item","_id","success","useWishlist"],"mappings":"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","sourcesContent":["import {\n  createContext,\n  useContext,\n  useState,\n  useReducer,\n  useEffect,\n} from \"react\";\nimport { useAuth } from \"./authContext\";\nimport {\n  getWishlistItems,\n  addToWishlist,\n  removeFromWishlist,\n} from \"../services/wishlistServices\";\nimport { wishlistReducer } from \"../reducers/wishlistReducer\";\nimport { toast } from \"react-hot-toast\";\n\nconst WishlistContext = createContext();\n\nconst WishlistProvider = ({ children }) => {\n  const { token, isAuth, navigate } = useAuth();\n  const [wishlistState, wishlistDispatch] = useReducer(wishlistReducer, []);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (isAuth) {\n      try {\n        (async () => {\n          const { data, status } = await getWishlistItems(token);\n\n          if (status === 200) {\n            wishlistDispatch({\n              type: \"SET_WISHLIST_DATA\",\n              payload: data.wishlist,\n            });\n          }\n        })();\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }, [isAuth]);\n\n  const toggleWishlist = async (product) => {\n    if (isAuth) {\n      const itemExists = wishlistState.find((item) => item._id === product._id);\n\n      if (itemExists) {\n        setLoading(true);\n        const { data, status } = await removeFromWishlist(product._id, token);\n        setLoading(false);\n\n        if (status === 200) {\n          toast.success(\"Product removed from Wishlist!\");\n          wishlistDispatch({\n            type: \"SET_WISHLIST_DATA\",\n            payload: data.wishlist,\n          });\n        }\n      } else {\n        setLoading(true);\n        const { data, status } = await addToWishlist(product, token);\n        setLoading(false);\n\n        if (status === 201) {\n          toast.success(\"Product added to Wishlist!\");\n          wishlistDispatch({\n            type: \"SET_WISHLIST_DATA\",\n            payload: data.wishlist,\n          });\n        }\n      }\n    } else {\n      navigate(\"/login\");\n    }\n  };\n\n  return (\n    <WishlistContext.Provider\n      value={{ wishlistState, wishlistDispatch, toggleWishlist, loading }}\n    >\n      {children}\n    </WishlistContext.Provider>\n  );\n};\n\nconst useWishlist = () => useContext(WishlistContext);\n\nexport { WishlistProvider, useWishlist };\n"]},"metadata":{},"sourceType":"module"}